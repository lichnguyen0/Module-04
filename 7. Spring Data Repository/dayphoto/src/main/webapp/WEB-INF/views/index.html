<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: head"></head>
<body style="margin:0; font-family:Arial, sans-serif; background-color:#1a1a2e; color:#f0f0f0;">

<header th:replace="layout :: header"></header>

<!-- Photo of the Day -->
<section style="text-align:center; margin:30px auto; max-width:90%;">
  <h3 style="color:#f0f0f0; margin-bottom:15px;">Bức ảnh của ngày</h3>
  <img id="img-of-the-day" alt="Photo of the Day"
       style="border-radius:12px; max-width:80%; max-height:600px; box-shadow:0 8px 20px rgba(0,0,0,0.5);">
</section>

<script>
  fetch('https://api.nasa.gov/planetary/apod?api_key=r4o7dnrcJqC9SQAWv17IV7eYGqoxfchZ7kjx7ynk')
          .then(r => r.json())
          .then(data => {
            const img = document.getElementById('img-of-the-day');
            img.src = data.media_type === "image" ? data.url : "https://apod.nasa.gov/apod/image/1901/IC405_Abolfath_3951.jpg";
          }).catch(console.error);
</script>

<!-- Feedback Form -->
<section style="margin:40px auto; max-width:450px; padding:25px; border-radius:20px;
                background-color:#2e2e3f; box-shadow:0 8px 20px rgba(0,0,0,0.4);">
  <h3 style="text-align:center; margin-bottom:20px; font-size:1.6em; color:#f0f0f0;">Send Your Feedback</h3>
  <form th:action="@{/photo/feedback}" method="POST" style="display:flex; flex-direction:column; gap:12px;">
    <input type="text" name="author" placeholder="Author Name" required
           style="padding:12px; border-radius:10px; border:none; outline:none; background:#3b3b55;
                  color:#f0f0f0; font-size:1em; box-shadow:0 0 4px rgba(0,255,255,0.2); transition:0.3s;">
    <textarea name="comment" placeholder="Your feedback" required rows="4"
              style="padding:12px; border-radius:10px; border:none; outline:none; background:#3b3b55;
                     color:#f0f0f0; font-size:1em; box-shadow:0 0 4px rgba(0,255,255,0.2); transition:0.3s;"></textarea>
    <label for="rating" style="color:#f0f0f0; font-weight:bold;">Rating:</label>
    <select name="rating" id="rating" required
            style="padding:10px; border-radius:10px; border:none; outline:none; background:#3b3b55;
                   color:#f0f0f0; font-size:1em; box-shadow:0 0 4px rgba(0,255,255,0.2); transition:0.3s;">
      <option value="">--Select--</option>
      <option value="1">1 ⭐</option>
      <option value="2">2 ⭐⭐</option>
      <option value="3">3 ⭐⭐⭐</option>
      <option value="4">4 ⭐⭐⭐⭐</option>
      <option value="5">5 ⭐⭐⭐⭐⭐</option>
    </select>
    <input type="submit" value="Send Feedback"
           style="padding:12px; border-radius:12px; border:none; font-size:1em; font-weight:bold;
                  background: linear-gradient(90deg,#0ff,#0aa); /* màu nhấn 10% */
                  color:#000; cursor:pointer;
                  box-shadow:0 0 10px #0ff, 0 4px 10px rgba(0,0,0,0.3); transition:0.3s;">
  </form>
</section>

<!-- Feedback Table -->
<section style="max-width:800px; margin:40px auto; padding:20px; border-radius:20px;
                background-color:#2e2e3f; box-shadow:0 8px 20px rgba(0,0,0,0.4);">
  <h3 style="text-align:center; margin-bottom:20px; font-size:1.6em; color:#f0f0f0;">Today’s Feedback</h3>
  <table style="width:100%; border-collapse:collapse; box-shadow:0 4px 15px rgba(0,0,0,0.3);">
    <thead style="background:linear-gradient(90deg,#0ff,#0aa); color:#000;">
    <tr>
      <th style="padding:10px; border-radius:10px 10px 0 0;">Name</th>
      <th style="padding:10px;">Feedback</th>
      <th style="padding:10px;">Rating</th>
      <th style="padding:10px;">Likes</th>
      <th style="padding:10px;">Action</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="f : ${feedbacks}" style="background-color:#3b3b55; color:#f0f0f0; border-bottom:1px solid #444;">
      <td th:text="${f.author}" style="padding:8px;"></td>
      <td th:text="${f.comment}" style="padding:8px;"></td>
      <td th:text="${f.rating} + ' ⭐'" style="padding:8px;"></td>
      <td th:text="${f.likes}" style="padding:8px;"></td>
      <td style="padding:8px;">
        <form th:action="@{/photo/like/{id}(id=${f.id})}" method="POST">
          <button type="submit" style="padding:6px 10px; border:none; border-radius:8px;
                   background:linear-gradient(90deg,#0ff,#0aa); color:#000; cursor:pointer;
                   box-shadow:0 0 8px #0ff;">❤️ Like</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <!-- Pagination -->
  <div style="margin-top:20px; text-align:center; color:#f0f0f0;">
    <span th:if="${currentPage > 0}">
      <a th:href="@{/photo(page=${currentPage - 1}, size=${pageSize})}" style="color:#0ff; text-decoration:none; margin-right:10px;">Previous</a>
    </span>
    <span th:text="${currentPage + 1}"></span> / <span th:text="${totalPages}"></span>
    <span th:if="${currentPage + 1 < totalPages}">
      <a th:href="@{/photo(page=${currentPage + 1}, size=${pageSize})}" style="color:#0ff; text-decoration:none; margin-left:10px;">Next</a>
    </span>
  </div>
</section>

<footer th:replace="layout :: footer"></footer>

<script>
  const inputs = document.querySelectorAll('input, textarea, select');
  inputs.forEach(input => {
    input.addEventListener('focus', () => {
      input.style.boxShadow = "0 0 10px #0ff, 0 4px 10px rgba(0,0,0,0.3)";
    });
    input.addEventListener('blur', () => {
      input.style.boxShadow = "0 0 4px rgba(0,255,255,0.2)";
    });
  });
</script>
</body>
</html>
